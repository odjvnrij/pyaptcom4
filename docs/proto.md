# 简介
使用modbus tcp协议
注：该设备的字为2bytes

# 消息结构
## Modbus TCP 头
详见：[https://www.cnblogs.com/ioufev/articles/10830028.html]
eg：00 0f 00 00 00 07 ff
- 0f 00 为 Transaction Id，事务ID
- 00 00 为 Protocol Id，Modbus Tcp 恒为 0x0000
- 00 07 为 Len，该Len为后续还有多少bytes消息，不包含Len本身
- ff 为 Unit Id，设备地址


## Modbus 体
体的 [0:0] 字节为体类型，
### [0x03] 读保持寄存器
**req**
eg: 03 85 26 00 01
- 03 体类型
- 85 26 为起始地址，恒定两个字节
- 00 01 为读取寄存器个数，每个寄存器一个字，即2bytes

**resp**
eg: 03 02 00 00
- 03 体类型
- 02 返回字节数
- 00 00 地址0x8536的返回数据

### [0x04] 读写入寄存器
**req**
eg: 04 8c 02 00 02
- 04 同消息0x03
- 8c 02 同消息0x03
- 00 02 同消息0x03

**resp**
eg: 04 04 40 00 44 83
- 04 体类型
- 04 返回字节数
- 40 00 44 83 地址0x8c02的返回数据


### [0x10] 写多个寄存器
**req**
eg: 10 41 07 00 02 04 00 00 41 f0
- 10 体类型
- 41 07 起始地址
- 00 02 寄存器数量
- 04 字节长度
- 00 00 41 f0 写入消息

**resp**
这是写入成功的返回值
eg: 10 41 07 00 02
- 10 体类型
- 41 07 起始地址
- 00 02 寄存器数量

## 不同的消息
### [0x10] 温度设置
eg: 10 41 07 00 02 04 14 7b 41 f8
- 10 体类型
- 41 07 起始地址 (0x4107 为 温度设置的寄存器)
- 00 02 寄存器数量
- 04 字节长度
- 14 7b 41 f8 写入消息
其中 14 7b 41 f8 重组为0x41f8147b，转浮点数即为摄氏度，即30.01度 